<script>
  let username;
  $(function () {
    // identity
    let identity = localStorage.getItem("_sanrio_game_03041027");
    if (!identity) {
      identity = Math.random().toString(36).slice(2) + new Date().getTime();
      localStorage.setItem("_sanrio_game_03041027", identity);
    }
    $("input[name=identity]").val(identity);
    // identity end
    // track
    accessTrack();
    //
    $("#start-btn").on("click", function () {
      activeSection("#question1");
    });

    $("#result-btn").on("click", function () {
      username = $("#username").val().trim();
      if (!username) {
        $("#username").focus();
        alert("尚未輸入姓名。");
        return;
      }
      if (getLength(username) > 16) {
        $("#username").focus();
        alert("名稱長度最大為 8 個中文字 或 16 個英文字。");
        return;
      }
      console.log(username, getLength(username));
      $("#result-form").submit();
    });
    $(".option1, .option2").on("click", function () {
      const $section = $(this).parents(".section");
      const next = $section.data("next");
      const id = $section.attr("id");
      const $input = $("input[name=" + id + "]");
      const option = $(this).hasClass("option1") ? 1 : 0;
      $input.val(option);
      activeSection(next);
    });
  });
</script>

<div id="cover" class="section active">
  <img src="/assets/img/cover_xs.jpg" alt="cover" />
  <img id="ftf-text" src="/assets/img/ftf.gif" alt="" />
  <div id="start-btn">
    <img src="/assets/img/title.gif" alt="" />
  </div>
</div>

<div id="question1" class="section" data-next="#question2">
  <img src="/assets/img/question_r.jpg" alt="party" />
  <div class="question_num">
    <img src="/assets/img/question_num.jpg" alt="question1" />
  </div>

  <a class="section-logo" href="/"></a>
  <div class="question">在有許多陌生人的聚會中，你會</div>
  <div class="option1">
    <span>A 積極認識新朋友</span>
  </div>
  <div class="option2">
    <span>B 只和熟悉的朋友玩在一起</span>
  </div>
</div>

<div id="question2" class="section" data-next="#question3">
  <img src="/assets/img/question_p.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question2"
      style="left: -100%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">當朋友和你抱怨工作和生活時，你會</div>
  <div class="option1">
    <span>A 幫他分析事件本身</span>
  </div>
  <div class="option2">
    <span>B 先安撫他的情緒</span>
  </div>
</div>

<div id="question3" class="section" data-next="#question4">
  <img src="/assets/img/question_r.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question3"
      style="left: -200%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">朋友說要幫你介紹對象，你會</div>
  <div class="option1">
    <span>A 先詢問對方的年齡、興趣，職業等</span>
  </div>
  <div class="option2">
    <span>B 總之先見面再說，一切順其自然</span>
  </div>
</div>

<div id="question4" class="section" data-next="#question5">
  <img src="/assets/img/question_p.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question4"
      style="left: -300%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">和另一半的三天兩夜之旅，你會更傾向哪種</div>
  <div class="option1">
    <span>A 會照時間按照排定的行程走</span>
  </div>
  <div class="option2">
    <span>B 不排行程，每天睡醒再看要做什麼</span>
  </div>
</div>

<div id="question5" class="section" data-next="#question6">
  <img src="/assets/img/question_r.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question5"
      style="left: -400%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">和另一半起爭執時，你會</div>
  <div class="option1">
    <span>A 和對方表達自己的情緒和想法</span>
  </div>
  <div class="option2">
    <span>B 不太擅長溝通也不喜歡吵架，總之先認錯再說</span>
  </div>
</div>

<div id="question6" class="section" data-next="#question7">
  <img src="/assets/img/question_p.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question6"
      style="left: -500%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">工作上負責的項目出錯了，你覺得</div>
  <div class="option1">
    <span>A 罪惡感很重，怕別人覺得自己很雷</span>
  </div>
  <div class="option2">
    <span>B 不用太在意，可以改過來就好了</span>
  </div>
</div>

<div id="question7" class="section" data-next="#question8">
  <img src="/assets/img/question_r.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question7"
      style="left: -600%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">主管突然單獨把你找去會議室，你覺得</div>
  <div class="option1">
    <span>A 很緊張，在腦中先設想所有可能</span>
  </div>
  <div class="option2">
    <span>B 沒設想什麼立場，總之先聽聽看對方要說什麼</span>
  </div>
</div>

<div id="question8" class="section" data-next="#name">
  <img src="/assets/img/question_p.jpg" alt="party" />
  <div class="question_num">
    <img
      src="/assets/img/question_num.jpg"
      alt="question8"
      style="left: -700%"
    />
  </div>
  <a class="section-logo" href="/"></a>
  <div class="question">在工作的團體中，你通常會擔任</div>
  <div class="option1">
    <span>A 領導者，<br />制定計劃並監督大家執行狀況</span>
  </div>
  <div class="option2">
    <span>B 組員，<br />不太會提出想法但會執行被分配的項目</span>
  </div>
</div>

<div id="name" class="section">
  <img src="/assets/img/name.jpg" alt="who" />
  <a class="section-logo" href="/"></a>
  <div id="name-block">
    <form id="result-form" action="/game" method="post">
      <input type="text" name="username" id="username" />
      <input type="hidden" name="question1" />
      <input type="hidden" name="question2" />
      <input type="hidden" name="question3" />
      <input type="hidden" name="question4" />
      <input type="hidden" name="question5" />
      <input type="hidden" name="question6" />
      <input type="hidden" name="question7" />
      <input type="hidden" name="question8" />
      <input type="hidden" name="identity" />
    </form>
  </div>
  <div id="result-btn">
    <img src="/assets/img/result-btn.png" alt="" />
  </div>
</div>
